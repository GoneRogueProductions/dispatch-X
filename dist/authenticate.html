<!DOCTYPE html><!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]--><!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]--><!--[if gt IE 8]><!--><html class="no-js" lang="en-US"><!--<![endif]--><head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Dispatch: Login</title>
        <!-- style and script resources -->
        <!--meta properties -->
        <meta name="description" content="Login onto Dispatch">
        <!--detailed robots meta https://developers.google.com/search/reference/robots_meta_tag -->
        <meta name="robots" content="index, follow, max-snippet: -1, max-image-preview:large, max-video-preview: -1">
        <link rel="canonical" href="https://dispatch.eu.org/authenticate">
        <!--open graph meta tags for social sites and search engines-->
        <meta property="og:locale" content="en_US">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Dispatch: Login">
        <meta property="og:description" content="Login onto Dispatch">
        <meta property="og:url" content="https://dispatch.eu.org/authenticate">
        <meta property="og:site_name" content="Dispatch">
        <meta property="og:image" content="images//hom-banner-compressed.jpg">
        <meta property="og:image:secure_url" content="images//hom-banner-compressed.jpg">
        <meta property="og:image:width" content="1200">
        <meta property="og:image:height" content="660">
        <!--twitter description-->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:description" content="Login onto Dispatch">
        <meta name="twitter:title" content="Dispatch: Login">
        <meta name="twitter:site" content="https://dispatch.eu.org/authenticate">
        <meta name="twitter:image" content="images/hom-banner-compressed.jpg">
        <meta name="twitter:creator" content="@uimaxbai">

        <!-- Site fevicon icons -->
        
        <link rel="preload" href="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js" as="script">
        <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/jquery.validate.min.js" as="script">

        <link rel="icon" href="images/icon/cropped-cropped-favicon-1-1-32x32.png" sizes="32x32">
        <link rel="icon" href="images/icon/cropped-cropped-favicon-1-1-192x192.png" sizes="192x192">
        <link rel="apple-touch-icon-precomposed" href="images/icon/cropped-cropped-favicon-1-1-180x180.png">
        <meta name="msapplication-TileImage" content="images/icon/cropped-cropped-favicon-1-1-270x270.png">
        <link rel="stylesheet" href="/css/new_user.css">
        <!--complete list of meta tags at - https://gist.github.com/lancejpollard/1978404 -->
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <img class="npy" src="/img/backgrounds/bg-1.jpg">
        <div class="npb">
            <div class="npg">
                <img class="npc" src="/img/logo/android-chrome-192x192.png">
                
                
                
                <form class="ir" id="loginForm">
                    <h1 class="npl">Sign in</h1>
                    <div class="ta">
                        <div class="tf">@</div>
                        <div class="tu">
                            <input type="text" name="username" class="g" id="logInput" placeholder="username">
                            <label for="floatingInput">Username</label>
                        </div>
                    </div>
    
                    <div class="ta">
                        <div class="tu">
                            <input type="password" name="password" class="g" id="passwInput" placeholder="*******">
                            <label for="floatingInput1">Password</label>
                        </div>
                    </div>
    
                    <input type="submit" id="loginButton" value="Sign in" class="ie nph">
                    <hr>
                    <div style="display: flex; justify-content: baseline;">
                        <a class="ii npp" onclick="showRegister()">No account? Register!</a>
                    </div>
                    
                </form>
    
                <form class="ir" id="regForm" style="display: none;">
                    <h1 class="npl">Register</h1>
                    <div class="ta">
                        <div class="tf">@</div>
                        <div class="tu">
                            <input minlength="5" name="username" required="" type="text" class="g" id="nameInput" placeholder="username">
                            <label for="floatingInput">Username</label>
                        </div>
                    </div>
                    <div class="ta">
                        <div class="tu">
                            <input required="" name="email" type="email" class="g" id="mailInput" placeholder="username">
                            <label for="floatingInput">E-mail</label>
                        </div>
                    </div>
    
                    <div class="ta">
                        <div class="tu">
                            <input minlength="8" name="password" type="password" class="g" id="passInput" placeholder="*******">
                            <label for="passInput1">Password</label>
                        </div>
                    </div>
    
                    <div class="ta" style="margin-top: -7px;">
                        <div class="tu">
                            <input minlength="8" required="" name="password1" type="password" class="g" id="passInput1" placeholder="*******">
                            <label for="passInput1">Repeat Password</label>
                        </div>
                    </div>
    
                    <div class="q npd">
                        <input style="width: auto;" requiredclass="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="tt" for="flexCheckDefault">
                        I agree to the <a href="#">terms and conditions</a>
                        </label>
                        <label style="padding-left: 2px; display: none;" for="flexCheckDefault" id="checkBoxErr" class="npm">Please check this box.</label>
                    </div>
    
                    <input type="submit" id="registerButton" value="Register" class="ie nph">
                    <hr>
                    <div style="display: flex; justify-content: baseline;">
                        <a class="ii npp" onclick="showLogin()">Have an account? Login!</a>
                    </div>
                </form>
            </div>
        </div>
        
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        
        <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/jquery.validate.min.js"></script>

        <script src="/js/fontawesome.js" crossorigin="anonymous" defer=""></script>
        <script defer="">
            function hasProblems() {
                if ($('#flexCheckDefault').is(':checked')) {
                    $("#checkBoxErr").css("display", "none");
                } else {
                    $("#checkBoxErr").css("display", "block");
                }

                var isDisabled = false;
                if (document.querySelector(".npv") != null) {
                    
                    for (const ele of document.querySelectorAll(".npv")) {
                        if (ele.style.display !== "none") {
                            $("#registerButton").prop("nk", true);
                            isDisabled = true;
                            break;
                        }
                    }
                }
                else if ($('#flexCheckDefault').is(':checked') == false) {
                    isDisabled = true;
                }

                if (isDisabled == false) {
                    $("#registerButton").prop("nk", false);
                }
                else if (isDisabled == true) {
                    $("#registerButton").prop("nk", true);
                }
            }

            const urlParams = new URLSearchParams(window.location.search);
            const register = urlParams.get('state');
            $(document).ready(function(){
                $("#regForm").validate({
                    rules: {
                        password1: {
                            equalTo: "#passInput"
                        },
                        password: {
                            required: true
                        }
                    }
                });
                hasProblems();
            });
            $('#regForm input').on("keyup", function() {
                hasProblems();
            });
            setInterval(hasProblems, 500);

            function showLogin() {
                $("#loginForm").show();
                $("#regForm").hide();
            }

            function showRegister() {
                $("#loginForm").hide();
                $("#regForm").show();
            }

            if (register == 'reg') showRegister();

            // Do not refresh on submit, to use AJAX to send request
            $(".login-form").submit(function(e) {
                e.preventDefault();
            });

            $("loginForm").submit(function(){
                var username = $('#logInput').text();
                var password = $('#passwInput').text();
                $.ajax('/api/v1/login.php', {
                    type: 'POST',  // http method
                    data: { username: username, password: password },  // TODO: encrypt pass
                    success: function (data, status, xhr) {
                        // TODO: fill in
                    },
                    error: function (jqXhr, textStatus, errorMessage) {
                        // TODO: fill in
                    }
			    });
            });

            // TODO: make one for register button
        </script>
    

</body></html>